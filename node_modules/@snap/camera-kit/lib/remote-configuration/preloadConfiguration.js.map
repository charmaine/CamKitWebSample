{"version":3,"file":"preloadConfiguration.js","sourceRoot":"","sources":["../../src/remote-configuration/preloadConfiguration.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,MAAM,CAAC;AAC5B,OAAO,EAAE,UAAU,EAAE,MAAM,oCAAoC,CAAC;AAChE,OAAO,EAAE,SAAS,EAAE,MAAM,gDAAgD,CAAC;AAC3E,OAAO,EAA4D,eAAe,EAAE,MAAM,qBAAqB,CAAC;AAChH,OAAO,EAAuB,0BAA0B,EAAE,MAAM,uBAAuB,CAAC;AAExF,MAAM,CAAC,MAAM,yBAAyB,GAAG,UAAU,CAC/C,2BAA2B,EAC3B,CAAC,eAAe,CAAC,KAAK,EAAE,0BAA0B,CAAC,KAAK,CAAU,EAClE,CAAC,QAAkB,EAAE,mBAAwC,EAAE,EAAE;IAC7D,mBAAmB;SACd,YAAY,CAAC,SAAS,CAAC,gBAAgB,CAAC;SACxC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SACb,SAAS,CAAC,CAAC,OAAO,EAAE,EAAE;QACnB,MAAM,MAAM,GAAmC,OAAO,CAAC,GAAG,CACtD,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAqB,CAAA,CACnE,CAAC;QAEF,QAAQ,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC;IAC/C,CAAC,CAAC,CAAC;AACX,CAAC,CACJ,CAAC","sourcesContent":["import { take } from \"rxjs\";\nimport { Injectable } from \"../dependency-injection/Injectable\";\nimport { Namespace } from \"../generated-proto/pb_schema/cdp/cof/namespace\";\nimport { LensCore, LensCoreConfig, SetPreloadedConfigurationInput, lensCoreFactory } from \"../lens-core-module\";\nimport { RemoteConfiguration, remoteConfigurationFactory } from \"./remoteConfiguration\";\n\nexport const setPreloadedConfiguration = Injectable(\n    \"setPreloadedConfiguration\",\n    [lensCoreFactory.token, remoteConfigurationFactory.token] as const,\n    (lensCore: LensCore, remoteConfiguration: RemoteConfiguration) => {\n        remoteConfiguration\n            .getNamespace(Namespace.LENS_CORE_CONFIG)\n            .pipe(take(1))\n            .subscribe((configs) => {\n                const inputs: SetPreloadedConfigurationInput = configs.map(\n                    ({ configId, value }) => ({ configId, value } as LensCoreConfig)\n                );\n\n                lensCore.setPreloadedConfiguration(inputs);\n            });\n    }\n);\n"]}